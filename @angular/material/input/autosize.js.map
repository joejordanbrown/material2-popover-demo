{"version":3,"sources":["../../../src/lib/input/autosize.ts"],"names":[],"mappings":"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","file":"autosize.js","sourcesContent":["import {Directive, ElementRef, Input, OnInit} from '@angular/core';\r\n\r\n\r\n/**\r\n * Directive to automatically resize a textarea to fit its content.\r\n */\r\n@Directive({\r\n  selector: 'textarea[md-autosize], textarea[mdTextareaAutosize],' +\r\n            'textarea[mat-autosize], textarea[matTextareaAutosize]',\r\n  exportAs: 'mdTextareaAutosize',\r\n  host: {\r\n    '(input)': 'resizeToFitContent()',\r\n    '[style.min-height]': '_minHeight',\r\n    '[style.max-height]': '_maxHeight',\r\n  },\r\n})\r\nexport class MdTextareaAutosize implements OnInit {\r\n  /** Minimum number of rows for this textarea. */\r\n  @Input() minRows: number;\r\n\r\n  get mdAutosizeMinRows(): number {\r\n    return this.minRows;\r\n  }\r\n\r\n  @Input() set mdAutosizeMinRows(value: number) {\r\n    this.minRows = value;\r\n  }\r\n\r\n  /** Maximum number of rows for this textarea. */\r\n  @Input() maxRows: number;\r\n\r\n  get mdAutosizeMaxRows(): number {\r\n    return this.maxRows;\r\n  }\r\n\r\n  @Input() set mdAutosizeMaxRows(value: number) {\r\n    this.maxRows = value;\r\n  }\r\n\r\n  /** Cached height of a textarea with a single row. */\r\n  private _cachedLineHeight: number;\r\n\r\n  constructor(private _elementRef: ElementRef) { }\r\n\r\n  /** The minimum height of the textarea as determined by minRows. */\r\n  get _minHeight() {\r\n    return this.minRows ? `${this.minRows * this._cachedLineHeight}px` : null;\r\n  }\r\n\r\n  /** The maximum height of the textarea as determined by maxRows. */\r\n  get _maxHeight() {\r\n    return this.maxRows ? `${this.maxRows * this._cachedLineHeight}px` : null;\r\n  }\r\n\r\n  ngOnInit() {\r\n    this._cacheTextareaLineHeight();\r\n    this.resizeToFitContent();\r\n  }\r\n\r\n  /**\r\n   * Cache the height of a single-row textarea.\r\n   *\r\n   * We need to know how large a single \"row\" of a textarea is in order to apply minRows and\r\n   * maxRows. For the initial version, we will assume that the height of a single line in the\r\n   * textarea does not ever change.\r\n   */\r\n  private _cacheTextareaLineHeight(): void {\r\n    let textarea = this._elementRef.nativeElement as HTMLTextAreaElement;\r\n\r\n    // Use a clone element because we have to override some styles.\r\n    let textareaClone = textarea.cloneNode(false) as HTMLTextAreaElement;\r\n    textareaClone.rows = 1;\r\n\r\n    // Use `position: absolute` so that this doesn't cause a browser layout and use\r\n    // `visibility: hidden` so that nothing is rendered. Clear any other styles that\r\n    // would affect the height.\r\n    textareaClone.style.position = 'absolute';\r\n    textareaClone.style.visibility = 'hidden';\r\n    textareaClone.style.border = 'none';\r\n    textareaClone.style.padding = '';\r\n    textareaClone.style.height = '';\r\n    textareaClone.style.minHeight = '';\r\n    textareaClone.style.maxHeight = '';\r\n\r\n    textarea.parentNode.appendChild(textareaClone);\r\n    this._cachedLineHeight = textareaClone.offsetHeight;\r\n    textarea.parentNode.removeChild(textareaClone);\r\n  }\r\n\r\n  /** Resize the textarea to fit its content. */\r\n  resizeToFitContent() {\r\n    let textarea = this._elementRef.nativeElement as HTMLTextAreaElement;\r\n    // Reset the textarea height to auto in order to shrink back to its default size.\r\n    textarea.style.height = 'auto';\r\n\r\n    // Use the scrollHeight to know how large the textarea *would* be if fit its entire value.\r\n    textarea.style.height = `${textarea.scrollHeight}px`;\r\n  }\r\n}\r\n"]}